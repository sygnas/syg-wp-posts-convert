!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t(require("axios"),require("csv-string/lib/parser")):"function"==typeof define&&define.amd?define(["axios","csv-string/lib/parser"],t):e["syg-wp-posts-convert"]=t(e.axios,e.Parser)}(this,function(e,t){"use strict";function r(e,t,r){var n=e[t].split(/[: -]/),i=n[0],o=n[1],a=n[2],s=n[3],u=n[4],c=r;return c=c.split("YY").join(i),c=c.split("MM").join(o),c=c.split("DD").join(a),c=c.split("hh").join(s),c=c.split("mm").join(u)}function n(e,t){return e[t].replace(/<("[^"]*"|'[^']*'|[^'">])*>/g,"")}function i(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}e=e&&e.hasOwnProperty("default")?e.default:e,t=t&&t.hasOwnProperty("default")?t.default:t;var o=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=new RegExp("{{{(.+?)\\((.*?)\\)}}}");return function(){function s(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,s);var t={template:'<li><a href="{{permalink}}">{{post_title}}</a></li>',target:".js-wp-posts",helpers:{remove_tag:n,convert_date:r}};this.opt=Object.assign(t,e)}return o(s,[{key:"start",value:function(t){var r=this;return new Promise(function(n,i){e.get(t).then(function(e){var t=r.$_convert_list(e.data);r.$_insert_to_target(t.join("")),n(t)}).catch(function(e){i(e)})})}},{key:"add_helper",value:function(e,t){this.opt.helpers[e]=t}},{key:"$_insert_to_target",value:function(e){var t=document.querySelector(this.opt.target);t&&t.insertAdjacentHTML("afterbegin",e)}},{key:"$_convert_list",value:function(e){var t=this,r=[];return e.forEach(function(e){var n=t.$_convert_post(e);r.push(n)}),r}},{key:"$_convert_post",value:function(e){var t=this.opt.template;return t=this.$_convert_helper(t,e),t=this.$_convert_simple(t,e)}},{key:"$_convert_simple",value:function(e,t){return Object.keys(t).forEach(function(r){e=e.replace("{{"+r+"}}",t[r])}),e}},{key:"$_convert_helper",value:function(e,r){for(var n=this.opt.helpers,o=void 0;null!==(o=a.exec(e));){var s=o[0],u=o[1],c=new t(o[2]).File()[0],l=n[u].apply(n,[r].concat(i(c)));e=e.replace(s,l)}return e}}]),s}()});
//# sourceMappingURL=wp-posts-convert.min.js.map
